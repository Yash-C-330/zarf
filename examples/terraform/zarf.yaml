kind: ZarfPackageConfig
metadata:
  name: "terraform"
  description: "Run terraform/terragrunt code"

components:
  - name: load-terraform
    import:
      path: ../package/terraform

  - name: execute-terraform
    actions:
      create:
        first:
          - cmd: "terraform init -plugin-dir=tf-plugins"
      deploy:
        first:
          - cmd: "terraform apply -auto-approve"
      remove:
        first:
          - cmd: "terraform destroy -auto-approve"
    files:
      # terraform code
      - source: main.tf
        target: main.tf
