kind: ZarfPackageConfig
metadata:
  name: component-actions
  description: "Component actions examples"

variables:
  - name: DEMO
    default: test

components:
  - name: on-create
    actions:
      onCreate:
        before:
          # on Windows, touch is replaced with New-Item
          - cmd: touch test-create.txt

  - name: on-deploy
    actions:
      onDeploy:
        before:
          - cmd: touch test-deploy-before.txt
        after:
          - cmd: touch test-deploy-after.txt

  - name: on-deploy-with-variable
    actions:
      onDeploy:
        before:
          - cmd: env

  - name: on-deploy-with-timeout
    description: This component will fail after 1 second
    actions:
      onDeploy:
        defaults:
          maxTotalSeconds: 1
          maxRetries: 3
        before:
          - cmd: sleep 30
